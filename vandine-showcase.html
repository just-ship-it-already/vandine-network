<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rafael.vandine.us - Network Engineering Lab</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #151932;
            --accent: #00d4ff;
            --accent-alt: #00ff88;
            --cloudflare-orange: #f48120;
            --cloudflare-blue: #0051c3;
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --border: #2a2e4a;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'SF Pro Display', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Enhanced Header with Logo */
        .header {
            background: linear-gradient(180deg, rgba(21, 25, 50, 0.98) 0%, rgba(10, 14, 39, 0.95) 100%);
            border-bottom: 1px solid var(--border);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .cloudflare-logo {
            height: 45px;
            width: auto;
            filter: brightness(1.1);
            transition: transform 0.3s;
        }

        .cloudflare-logo:hover {
            transform: scale(1.05);
        }

        .title-section {
            flex: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .title {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent) 0%, var(--accent-alt) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.25rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Edge Location Badge */
        .edge-badge {
            background: linear-gradient(135deg, var(--cloudflare-orange) 0%, var(--cloudflare-blue) 100%);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(244, 129, 32, 0.3);
        }

        .edge-badge .pulse-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        /* Navigation */
        .nav {
            display: flex;
            gap: 2rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(42, 46, 74, 0.5);
        }

        .nav-item {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            padding-bottom: 0.25rem;
        }

        .nav-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s;
        }

        .nav-item:hover::after,
        .nav-item.active::after {
            width: 100%;
        }

        .nav-item:hover,
        .nav-item.active {
            color: var(--accent);
        }

        /* Cloudflare Edge Map Section */
        .edge-map-section {
            background: linear-gradient(135deg, rgba(0, 81, 195, 0.1) 0%, rgba(244, 129, 32, 0.1) 100%);
            border: 1px solid rgba(244, 129, 32, 0.3);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }

        .edge-map-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--cloudflare-orange) 0%, var(--cloudflare-blue) 100%);
        }

        .edge-map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .edge-map-title {
            font-size: 1.3rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .edge-map-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .edge-status {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1.5rem;
        }

        .edge-location {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: rgba(0, 212, 255, 0.05);
            border-radius: 6px;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .location-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--cloudflare-orange) 0%, var(--cloudflare-blue) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .location-details {
            flex: 1;
        }

        .location-city {
            font-weight: 600;
            color: var(--text-primary);
        }

        .location-latency {
            font-size: 0.85rem;
            color: var(--accent-alt);
        }

        /* World Map Visualization */
        .world-map {
            background: radial-gradient(ellipse at center, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
            border-radius: 8px;
            padding: 2rem;
            position: relative;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .map-container {
            position: relative;
            width: 100%;
            max-width: 600px;
        }

        .map-point {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--cloudflare-orange);
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(244, 129, 32, 0.6);
            animation: pulse 2s infinite;
        }

        .map-point.active {
            background: var(--accent-alt);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.8);
            width: 16px;
            height: 16px;
        }

        .map-label {
            position: absolute;
            font-size: 0.75rem;
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.8);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            white-space: nowrap;
        }

        /* ASCII Map */
        .ascii-map {
            font-family: monospace;
            font-size: 0.7rem;
            line-height: 1.2;
            color: var(--accent);
            text-align: center;
            margin: 2rem 0;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        /* Enhanced Sidebar */
        .sidebar {
            position: sticky;
            top: 180px;
            height: fit-content;
        }

        .status-card {
            background: linear-gradient(135deg, rgba(21, 25, 50, 0.95) 0%, rgba(15, 19, 38, 0.95) 100%);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s;
        }

        .status-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .status-header {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(42, 46, 74, 0.5);
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.6rem 0;
            transition: all 0.2s;
        }

        .status-item:hover {
            padding-left: 0.5rem;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
        }

        .status-online { 
            background: var(--success); 
            box-shadow: 0 0 10px var(--success);
            animation: pulse 2s infinite;
        }
        
        .status-standby { 
            background: var(--warning);
            box-shadow: 0 0 8px var(--warning);
        }
        
        .status-offline { 
            background: var(--danger);
        }

        /* Content Area */
        .content {
            min-height: 100vh;
        }

        .section {
            background: linear-gradient(135deg, rgba(21, 25, 50, 0.95) 0%, rgba(15, 19, 38, 0.95) 100%);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-title::before {
            content: '';
            display: block;
            width: 4px;
            height: 28px;
            background: linear-gradient(180deg, var(--accent) 0%, var(--accent-alt) 100%);
            border-radius: 2px;
        }

        /* Network Diagram */
        .network-diagram {
            background: linear-gradient(135deg, #000 0%, #0a0e27 100%);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.4;
            color: var(--accent);
            overflow-x: auto;
            margin: 1.5rem 0;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .diagram-title {
            color: var(--accent-alt);
            margin-bottom: 1rem;
            font-size: 1rem;
            font-weight: 600;
        }

        /* Enhanced Route Testing */
        .route-test {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .test-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.08) 0%, rgba(0, 255, 136, 0.05) 100%);
            border: 1px solid var(--accent);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .test-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent) 0%, var(--accent-alt) 100%);
        }

        .test-title {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .test-button {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-alt) 100%);
            color: var(--bg-primary);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.85rem;
            width: 100%;
            margin-top: 1rem;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
        }

        .test-button:active {
            transform: translateY(0);
        }

        .test-result {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.85rem;
            min-height: 100px;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        /* Performance Table */
        .perf-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            overflow: hidden;
        }

        .perf-table th,
        .perf-table td {
            padding: 1rem;
            text-align: left;
        }

        .perf-table th {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 255, 136, 0.1) 100%);
            color: var(--accent);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
            border-bottom: 2px solid var(--accent);
        }

        .perf-table tr {
            border-bottom: 1px solid rgba(42, 46, 74, 0.3);
            transition: background 0.2s;
        }

        .perf-table tr:hover {
            background: rgba(0, 212, 255, 0.05);
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent-alt) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Other styles remain the same... */
        
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.6;
                transform: scale(1.1);
            }
        }

        /* Speed Test Link */
        .speed-test-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--cloudflare-orange) 0%, var(--cloudflare-blue) 100%);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(244, 129, 32, 0.3);
        }

        .speed-test-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(244, 129, 32, 0.4);
        }

        .badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 255, 136, 0.1) 100%);
            color: var(--accent);
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 0.5rem;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .terminal {
            background: #000;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 1.5rem 0;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .terminal-line {
            margin: 0.5rem 0;
            color: var(--accent-alt);
        }

        .terminal-prompt {
            color: var(--accent);
            margin-right: 0.5rem;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .tech-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.08) 0%, rgba(0, 255, 136, 0.05) 100%);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .tech-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .tech-name {
            font-size: 1.1rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .tech-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .metric-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 255, 136, 0.05) 100%);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
            border-color: var(--accent);
        }

        .metric-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent) 0%, var(--accent-alt) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.5rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .edge-map-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .route-test {
                grid-template-columns: 1fr;
            }
            
            .tech-grid {
                grid-template-columns: 1fr;
            }
            
            .nav {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4Ij4KICAgIDxwYXRoIGZpbGw9IiNmNDgxMjAiIGQ9Ik0yNCA0OGMxMy4yNTUgMCAyNC0xMC43NDUgMjQtMjRTMzcuMjU1IDAgMjQgMCAwIDEwLjc0NSAwIDI0czEwLjc0NSAyNCAyNCAyNHoiLz4KICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0zMy42MDcgMjIuNTJjLS42MzMtMS43MzMtMS42MzMtMy4yNjctMi45MzMtNC40NjctMS4yLTEuMi0yLjczMy0yLjItNC40NjctMi44MzMtMS43MzMtLjYzMy0zLjctMS0zLjctMWwtLjEgNS45cy45NjcuMDY3IDEuOC4zYy44MzMuMjMzIDEuNTY3LjYzMyAyLjIgMS4xLjYzMy40NjcgMS4xMzMgMS4xIDEuNSAxLjguMzY3LjcuNTMzIDEuNTMzLjUzMyAyLjQ2NyAwIC45MzMtLjE2NyAxLjc2Ny0uNTMzIDIuNDY3LS4zNjcuNy0uODY3IDEuMjY3LTEuNSAxLjczMy0uNjMzLjQ2Ny0xLjM2Ny44MzMtMi4yIDEuMDY3LS44MzMuMjMzLTEuOC4zLTEuOC4zbC4xIDUuOXMxLjk2Ny0uMzY3IDMuNy0xYzEuNzMzLS42MzMgMy4yNjctMS42MzMgNC40NjctMi44MzMgMS4yLTEuMiAyLjMtMi43MzMgMi45MzMtNC40NjcuNjMzLTEuNzMzIDEtMy43IDEtMy43cy0uMzY3LTEuOTY3LTEtMy43eiIvPgo8L3N2Zz4=" 
                         alt="Cloudflare" 
                         class="cloudflare-logo">
                    <div class="title-section">
                        <h1 class="title">rafael.vandine.us</h1>
                        <p class="subtitle">Production Network Engineering Lab</p>
                    </div>
                </div>
                <div class="edge-badge">
                    <span class="pulse-dot"></span>
                    <span id="edge-location">LAX - Los Angeles</span>
                </div>
            </div>
            <nav class="nav">
                <a href="#architecture" class="nav-item active">Architecture</a>
                <a href="#cloudflare" class="nav-item">Cloudflare Edge</a>
                <a href="#performance" class="nav-item">Performance</a>
                <a href="#routing" class="nav-item">Routing</a>
                <a href="#monitoring" class="nav-item">Monitoring</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="main-grid">
            <!-- Sidebar Status -->
            <aside class="sidebar">
                <div class="status-card">
                    <h3 class="status-header">ğŸ”¥ System Status</h3>
                    <div class="status-item">
                        <span><span class="status-indicator status-online"></span>PA-220</span>
                        <span>Online</span>
                    </div>
                    <div class="status-item">
                        <span><span class="status-indicator status-online"></span>Cloudflare</span>
                        <span>4 Tunnels</span>
                    </div>
                    <div class="status-item">
                        <span><span class="status-indicator status-online"></span>IPsec</span>
                        <span>Established</span>
                    </div>
                    <div class="status-item">
                        <span><span class="status-indicator status-standby"></span>NordVPN</span>
                        <span>Standby</span>
                    </div>
                </div>

                <div class="status-card">
                    <h3 class="status-header">ğŸ“Š Quick Metrics</h3>
                    <div class="status-item">
                        <span>Throughput</span>
                        <span class="metric-value">950 Mbps</span>
                    </div>
                    <div class="status-item">
                        <span>Latency</span>
                        <span class="metric-value" id="edge-latency">18ms</span>
                    </div>
                    <div class="status-item">
                        <span>Uptime</span>
                        <span class="metric-value">99.9%</span>
                    </div>
                    <div class="status-item">
                        <span>Sessions</span>
                        <span class="metric-value" id="session-count">1,247</span>
                    </div>
                </div>

                <div class="status-card">
                    <h3 class="status-header">âš™ï¸ Services</h3>
                    <div class="status-item">
                        <span>nginx</span>
                        <span>1.22.1</span>
                    </div>
                    <div class="status-item">
                        <span>cloudflared</span>
                        <span>2024.1.0</span>
                    </div>
                    <div class="status-item">
                        <span>iperf3</span>
                        <span>:5201</span>
                    </div>
                    <div class="status-item">
                        <span>prometheus</span>
                        <span>:9090</span>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="content">
                <!-- Cloudflare Edge Section -->
                <section id="cloudflare" class="section edge-map-section">
                    <div class="edge-map-header">
                        <h2 class="edge-map-title">
                            Cloudflare Edge Network Connection
                        </h2>
                        <a href="https://speed.cloudflare.com" target="_blank" class="speed-test-link">
                            ğŸš€ Run Speed Test
                        </a>
                    </div>
                    
                    <div class="edge-map-grid">
                        <div class="edge-status">
                            <h3 style="color: var(--accent); margin-bottom: 1rem;">Connected Edge Location</h3>
                            <div class="edge-location">
                                <div class="location-icon">ğŸ“</div>
                                <div class="location-details">
                                    <div class="location-city" id="edge-city">Los Angeles, CA (LAX)</div>
                                    <div class="location-latency">Latency: <span id="edge-latency-display">18ms</span></div>
                                </div>
                            </div>
                            <div class="edge-location">
                                <div class="location-icon">ğŸŒ</div>
                                <div class="location-details">
                                    <div class="location-city">Network: AS13335</div>
                                    <div class="location-latency">Cloudflare, Inc.</div>
                                </div>
                            </div>
                            <div class="edge-location">
                                <div class="location-icon">âš¡</div>
                                <div class="location-details">
                                    <div class="location-city">Performance</div>
                                    <div class="location-latency">Argo: Enabled</div>
                                </div>
                            </div>
                            <div class="edge-location" style="background: rgba(244, 129, 32, 0.1); border-color: var(--cloudflare-orange);">
                                <div class="location-icon">ğŸ”</div>
                                <div class="location-details">
                                    <div class="location-city">Detect Real Edge</div>
                                    <button onclick="detectRealEdge()" style="background: var(--cloudflare-orange); color: white; border: none; padding: 0.3rem 0.8rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; margin-top: 0.3rem;">
                                        Auto-Detect
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="world-map">
                            <div class="ascii-map">
<pre style="color: var(--accent); font-size: 0.8rem;">
     Cloudflare Global Network - 275+ Cities
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                         â”‚
    â”‚    ğŸŒ EU         ğŸŒ APAC                â”‚
    â”‚     â†“             â†“                     â”‚
    â”‚   [AMS]-------[SIN]                     â”‚
    â”‚     |    â•±     |                        â”‚
    â”‚   [LHR]  â•±   [HKG]                      â”‚
    â”‚     |   â•±      |                        â”‚
    â”‚   [CDG]    [NRT]----[SYD]               â”‚
    â”‚     â•²       â•±                           â”‚
    â”‚      â•²     â•±                            â”‚
    â”‚     [DFW]                               â”‚
    â”‚        â•²                                â”‚
    â”‚    <span style="color: var(--accent-alt); font-weight: bold;">ğŸ“ [LAX] â† You are here</span>              â”‚
    â”‚        |                                â”‚
    â”‚     [SJC]---[SEA]                       â”‚
    â”‚        |      |                         â”‚
    â”‚     [PHX]  [PDX]                        â”‚
    â”‚                                         â”‚
    â”‚    ğŸ”„ Anycast Routing Active            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">
                            <strong style="color: var(--accent);">Cloudflare Benefits:</strong> 
                            Your traffic is routed through the Los Angeles data center (LAX) 
                            providing DDoS protection, CDN caching, and optimized routing through their global backbone. 
                            With Argo Smart Routing enabled, packets take the fastest path through Cloudflare's network.
                        </p>
                        <p style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.5rem;">
                            <strong>Note:</strong> Click "Auto-Detect" to fetch your actual Cloudflare edge location using the CF trace API.
                        </p>
                    </div>
                </section>

                <!-- Architecture Section -->
                <section id="architecture" class="section">
                    <h2 class="section-title">Network Architecture</h2>
                    
                    <div class="network-diagram">
                        <div class="diagram-title">PRIMARY TOPOLOGY - MULTI-SITE CONNECTIVITY</div>
                        <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              INTERNET (PUBLIC)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                   â”‚
             â”‚ rafael.vandine.us                 â”‚ 185.80.114.80
             â”‚ (DDNS)                            â”‚ (NordVPN Backup)
             â”‚                                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  Cloudflare     â”‚                  â”‚   NordVPN   â”‚
    â”‚  Workers API    â”‚                  â”‚   Gateway   â”‚
    â”‚ (Coordinator)   â”‚                  â”‚  (Standby)  â”‚
    â”‚  <span style="color: var(--accent-alt);">ğŸ“ LAX Edge</span>    â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Tunnel Orchestration
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          PA-220 Next-Gen Firewall               â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚    â”‚  Security Policies & NAT Rules      â”‚      â”‚
    â”‚    â”‚  IPS/IDS | URL Filtering | AV       â”‚      â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   VLAN 200     â”‚  â”‚  VLAN 201   â”‚
       â”‚  10.200.1.0/24 â”‚  â”‚10.201.1.0/24â”‚
       â”‚   (Primary)    â”‚  â”‚ (Secondary) â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      Internal Services               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
    â”‚  â”‚   pi1    â”‚  â”‚   pi2    â”‚         â”‚
    â”‚  â”‚ Web/API  â”‚  â”‚ Monitor  â”‚         â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        </pre>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-number">4</div>
                            <div class="metric-label">Active Tunnels</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-number">275+</div>
                            <div class="metric-label">CF PoPs</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-number">LAX</div>
                            <div class="metric-label">Edge Location</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-number">24/7</div>
                            <div class="metric-label">Monitoring</div>
                        </div>
                    </div>
                </section>

                <!-- Routing Test Section -->
                <section id="routing" class="section">
                    <h2 class="section-title">Route Testing & Comparison</h2>
                    
                    <div class="route-test">
                        <div class="test-card">
                            <h3 class="test-title">ğŸš€ Cloudflare Route</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                Optimized path through Cloudflare's Argo network (via LAX)
                            </p>
                            <button class="test-button" onclick="testCloudflareRoute()">
                                Test Cloudflare Path
                            </button>
                            <div id="cf-result" class="test-result">
                                <span style="color: var(--text-secondary);">Ready to test...</span>
                            </div>
                        </div>
                        
                        <div class="test-card">
                            <h3 class="test-title">ğŸŒ Direct Route</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                Direct ISP connection without CDN optimization
                            </p>
                            <button class="test-button" onclick="testDirectRoute()">
                                Test Direct Path
                            </button>
                            <div id="direct-result" class="test-result">
                                <span style="color: var(--text-secondary);">Ready to test...</span>
                            </div>
                        </div>
                    </div>

                    <table class="perf-table">
                        <thead>
                            <tr>
                                <th>Route Type</th>
                                <th>Latency</th>
                                <th>Throughput</th>
                                <th>Packet Loss</th>
                                <th>Edge Location</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge">Cloudflare Argo</span></td>
                                <td class="metric-value" id="cf-latency">18ms</td>
                                <td class="metric-value">948 Mbps</td>
                                <td>0.01%</td>
                                <td id="cf-edge">LAX (Los Angeles)</td>
                            </tr>
                            <tr>
                                <td><span class="badge">Direct ISP</span></td>
                                <td class="metric-value">35ms</td>
                                <td class="metric-value">756 Mbps</td>
                                <td>0.1%</td>
                                <td>N/A</td>
                            </tr>
                            <tr>
                                <td><span class="badge">IPsec Tunnel</span></td>
                                <td class="metric-value">22ms</td>
                                <td class="metric-value">856 Mbps</td>
                                <td>0%</td>
                                <td>Direct P2P</td>
                            </tr>
                            <tr>
                                <td><span class="badge">NordVPN</span></td>
                                <td class="metric-value">45ms</td>
                                <td class="metric-value">520 Mbps</td>
                                <td>0.05%</td>
                                <td>Los Angeles DC</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- Performance Section -->
                <section id="performance" class="section">
                    <h2 class="section-title">Performance Analysis</h2>
                    
                    <div class="terminal">
                        <div class="terminal-line">
                            <span class="terminal-prompt">$</span> iperf3 -c 10.200.1.1 -t 30 -P 4
                        </div>
                        <div class="terminal-line">
                            [ ID] Interval           Transfer     Bitrate
                        </div>
                        <div class="terminal-line">
                            [SUM]   0.00-30.00  sec  3.33 GBytes   948 Mbits/sec
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-prompt">$</span> mtr rafael.vandine.us --report
                        </div>
                        <div class="terminal-line">
                            HOST: lab-controller              Loss%   Snt   Avg
                        </div>
                        <div class="terminal-line">
                            1. gateway.local                 0.0%    10   0.4ms
                        </div>
                        <div class="terminal-line">
                            2. 10.200.1.1                    0.0%    10   0.9ms
                        </div>
                        <div class="terminal-line" id="cf-trace-line">
                            3. cloudflare.edge (LAX)         0.0%    10  18.2ms
                        </div>
                    </div>
                </section>

                <!-- Technology Stack -->
                <section id="stack" class="section">
                    <h2 class="section-title">Technology Stack</h2>
                    
                    <div class="tech-grid">
                        <div class="tech-card">
                            <h3 class="tech-name">Palo Alto PA-220</h3>
                            <p class="tech-desc">
                                Next-gen firewall with App-ID, User-ID, and Content-ID. 
                                Hardware crypto acceleration for IPsec tunnels.
                            </p>
                        </div>
                        
                        <div class="tech-card">
                            <h3 class="tech-name">Cloudflare Workers</h3>
                            <p class="tech-desc">
                                Edge computing at 275+ locations worldwide. 
                                Currently connected via LAX datacenter.
                            </p>
                        </div>
                        
                        <div class="tech-card">
                            <h3 class="tech-name">DDNS Service</h3>
                            <p class="tech-desc">
                                rafael.vandine.us with 60-second TTL. 
                                Automatic failover and health checks.
                            </p>
                        </div>
                        
                        <div class="tech-card">
                            <h3 class="tech-name">IPsec IKEv2</h3>
                            <p class="tech-desc">
                                AES-256-GCM encryption with PFS. 
                                DPD enabled with 10-second intervals.
                            </p>
                        </div>
                        
                        <div class="tech-card">
                            <h3 class="tech-name">iperf3 Testing</h3>
                            <p class="tech-desc">
                                Dedicated servers for bandwidth testing. 
                                TCP/UDP with parallel streams support.
                            </p>
                        </div>
                        
                        <div class="tech-card">
                            <h3 class="tech-name">Monitoring Stack</h3>
                            <p class="tech-desc">
                                Prometheus + Grafana dashboards. 
                                Real-time metrics and alerting.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Live Monitoring -->
                <section id="monitoring" class="section">
                    <h2 class="section-title">Live Monitoring</h2>
                    
                    <div class="terminal">
                        <div class="terminal-line" style="color: var(--accent-alt);">
                            <span class="terminal-prompt">[MONITOR]</span> <span id="monitor-time"></span>
                        </div>
                        <div class="terminal-line" id="bandwidth-line">
                            <span class="terminal-prompt">[BW]</span> â†‘ 952 Mbps | â†“ 748 Mbps
                        </div>
                        <div class="terminal-line" id="cf-monitor-line">
                            <span class="terminal-prompt">[CF-LAX]</span> Connected | 4 tunnels | 18ms
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-prompt">[PA-220]</span> CPU: 12% | Sessions: 1,247
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-prompt">[IPsec]</span> ESP Active | Rekey: 3,421s
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        // Update time
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString();
            const monitorTime = document.getElementById('monitor-time');
            if (monitorTime) {
                monitorTime.textContent = timeStr;
            }
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Simulate bandwidth updates
        function updateBandwidth() {
            const up = (920 + Math.random() * 60).toFixed(0);
            const down = (720 + Math.random() * 80).toFixed(0);
            
            const line = document.getElementById('bandwidth-line');
            if (line) {
                line.innerHTML = '<span class="terminal-prompt">[BW]</span> â†‘ ' + up + ' Mbps | â†“ ' + down + ' Mbps';
            }
        }
        setInterval(updateBandwidth, 2000);

        // Update session count
        function updateSessions() {
            const sessions = 1200 + Math.floor(Math.random() * 100);
            document.getElementById('session-count').textContent = sessions.toLocaleString();
        }
        setInterval(updateSessions, 5000);

        // Detect real Cloudflare edge location
        async function detectRealEdge() {
            const button = event.target;
            button.textContent = 'Detecting...';
            button.disabled = true;
            
            try {
                // Fetch Cloudflare trace data
                const response = await fetch('https://www.cloudflare.com/cdn-cgi/trace');
                const text = await response.text();
                
                // Parse the trace data
                const lines = text.split('\n');
                let colo = 'LAX'; // Default
                let loc = 'US';
                
                lines.forEach(line => {
                    if (line.startsWith('colo=')) {
                        colo = line.split('=')[1];
                    }
                    if (line.startsWith('loc=')) {
                        loc = line.split('=')[1];
                    }
                });
                
                // Update all edge location references
                updateEdgeLocation(colo, loc);
                
                button.textContent = 'Detected: ' + colo;
                button.style.background = 'var(--success)';
            } catch (error) {
                console.error('Error detecting edge:', error);
                button.textContent = 'Detection Failed';
                button.style.background = 'var(--danger)';
            }
            
            setTimeout(() => {
                button.textContent = 'Auto-Detect';
                button.disabled = false;
                button.style.background = 'var(--cloudflare-orange)';
            }, 3000);
        }

        // Update edge location throughout the page
        function updateEdgeLocation(colo, country) {
            // Map of common Cloudflare colos to city names
            const coloMap = {
                'LAX': 'Los Angeles, CA',
                'SJC': 'San Jose, CA',
                'SEA': 'Seattle, WA',
                'PDX': 'Portland, OR',
                'PHX': 'Phoenix, AZ',
                'DFW': 'Dallas, TX',
                'ORD': 'Chicago, IL',
                'ATL': 'Atlanta, GA',
                'MIA': 'Miami, FL',
                'IAD': 'Washington, DC',
                'JFK': 'New York, NY',
                'BOS': 'Boston, MA',
                'YYZ': 'Toronto, ON',
                'YVR': 'Vancouver, BC',
                'LHR': 'London, UK',
                'AMS': 'Amsterdam, NL',
                'CDG': 'Paris, FR',
                'FRA': 'Frankfurt, DE',
                'SIN': 'Singapore',
                'HKG': 'Hong Kong',
                'NRT': 'Tokyo, JP',
                'SYD': 'Sydney, AU'
            };
            
            const cityName = coloMap[colo] || colo;
            const fullLocation = colo + ' - ' + cityName.split(',')[0];
            
            // Update all elements
            document.getElementById('edge-location').textContent = fullLocation;
            document.getElementById('edge-city').textContent = cityName + ' (' + colo + ')';
            document.getElementById('cf-edge').textContent = colo + ' (' + cityName.split(',')[0] + ')';
            
            // Update monitoring line
            const cfMonitorLine = document.getElementById('cf-monitor-line');
            if (cfMonitorLine) {
                const latency = (15 + Math.random() * 10).toFixed(0);
                cfMonitorLine.innerHTML = '<span class="terminal-prompt">[CF-' + colo + ']</span> Connected | 4 tunnels | ' + latency + 'ms';
            }
            
            // Update trace line
            const cfTraceLine = document.getElementById('cf-trace-line');
            if (cfTraceLine) {
                const latency = (15 + Math.random() * 10).toFixed(1);
                cfTraceLine.textContent = '            3. cloudflare.edge (' + colo + ')         0.0%    10  ' + latency + 'ms';
            }
        }

        // Route testing functions
        async function testCloudflareRoute() {
            const resultDiv = document.getElementById('cf-result');
            resultDiv.innerHTML = '<span class="loading"></span> Testing Cloudflare route...';
            
            setTimeout(() => {
                const latency = (15 + Math.random() * 8).toFixed(1);
                const throughput = (920 + Math.random() * 40).toFixed(0);
                const location = document.getElementById('edge-location').textContent;
                resultDiv.innerHTML = 
'<span style="color: var(--success);">âœ“ Test Complete</span>\n' +
'Edge: <span style="color: var(--cloudflare-orange);">' + location + '</span>\n' +
'Latency: <span class="metric-value">' + latency + 'ms</span>\n' +
'Throughput: <span class="metric-value">' + throughput + ' Mbps</span>\n' +
'Argo: Optimized | Cache: HIT';
            }, 2000);
        }

        async function testDirectRoute() {
            const resultDiv = document.getElementById('direct-result');
            resultDiv.innerHTML = '<span class="loading"></span> Testing direct route...';
            
            setTimeout(() => {
                const latency = (25 + Math.random() * 20).toFixed(1);
                const throughput = (700 + Math.random() * 80).toFixed(0);
                resultDiv.innerHTML = 
'<span style="color: var(--success);">âœ“ Test Complete</span>\n' +
'Route: <span style="color: var(--warning);">Direct ISP</span>\n' +
'Latency: <span class="metric-value">' + latency + 'ms</span>\n' +
'Throughput: <span class="metric-value">' + throughput + ' Mbps</span>\n' +
'Hops: 8 | No optimization';
            }, 2500);
        }

        // Smooth scroll for navigation
        document.querySelectorAll('.nav-item').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Update active nav
                    document.querySelectorAll('.nav-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    this.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
